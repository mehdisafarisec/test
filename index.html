<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>آزمون برنامه‌نویسی موبایل</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --correct-color: #4caf50;
            --incorrect-color: #f44336;
            --light-gray: #f5f5f5;
            --border-color: #ddd;
            --shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: #f9f9f9;
            color: #333;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            border-right: 4px solid var(--primary-color);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .description {
            margin-bottom: 15px;
            color: #555;
        }
        
        .progress-container {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            position: sticky;
            top: 10px;
            z-index: 100;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }
        
        .questions-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .question-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--shadow);
            border-right: 4px solid var(--primary-color);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .question-number {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 18px;
        }
        
        .question-status {
            font-size: 14px;
            padding: 4px 8px;
            border-radius: 4px;
            background-color: #e0e0e0;
        }
        
        .question-status.correct {
            background-color: #e8f5e9;
            color: var(--correct-color);
        }
        
        .question-status.incorrect {
            background-color: #ffebee;
            color: var(--incorrect-color);
        }
        
        .question-text {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: var(--light-gray);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            background-color: #e9e9e9;
        }
        
        .option.selected {
            background-color: #e3f2fd;
            border-color: var(--primary-color);
        }
        
        .option.correct {
            background-color: #e8f5e9;
            border-color: var(--correct-color);
        }
        
        .option.incorrect {
            background-color: #ffebee;
            border-color: var(--incorrect-color);
        }
        
        .option input {
            margin-left: 10px;
        }
        
        .option-label {
            font-weight: bold;
            margin-left: 8px;
            min-width: 24px;
        }
        
        .option-text {
            flex-grow: 1;
        }
        
        .feedback {
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            display: none;
        }
        
        .feedback.correct {
            display: block;
            background-color: #e8f5e9;
            color: var(--correct-color);
            border: 1px solid var(--correct-color);
        }
        
        .feedback.incorrect {
            display: block;
            background-color: #ffebee;
            color: var(--incorrect-color);
            border: 1px solid var(--incorrect-color);
        }
        
        .icon {
            margin-left: 5px;
            font-weight: bold;
        }
        
        .results {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            display: none;
        }
        
        .score {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .reset-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        
        .reset-btn:hover {
            background-color: #3a5a80;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .option {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>آزمون برنامه‌نویسی موبایل</h1>
        <p class="description">این آزمون شامل 150 سوال تستی می‌باشد. برای هر سوال گزینه صحیح را انتخاب کنید.</p>
    </header>
    
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text">
            <span id="answered-count">0 پاسخ داده شده</span>
            <span id="total-count">از 150 سوال</span>
        </div>
    </div>
    
    <div class="questions-container" id="questions-container">
        <!-- سوالات اینجا نمایش داده می‌شوند -->
    </div>
    
    <div class="results" id="results">
        <h2>نتایج آزمون</h2>
        <p class="score" id="score">امتیاز شما: 0 از 150</p>
        <button class="reset-btn" id="reset-btn">آزمون مجدد</button>
    </div>

    <script>
        // داده‌های سوالات
        const questions = [
            // سوالات شما اینجا قرار می‌گیرند
            // برای صرفه‌جویی در فضا، فقط 5 سوال اول نمایش داده شده
            {
                "id": 1,
                "text": "کدام رویکرد توسعه برنامه موبایل، بالاترین سطح عملکرد و دسترسی کامل به ویژگی‌های بومی دستگاه را ارائه می‌دهد؟",
                "options": ["برنامه‌نویسی بومی (Native)", "برنامه‌نویسی هیبریدی", "برنامه‌نویسی وب‌ویو", "برنامه‌نویسی چندپلتفرمی با فریمورک‌های وب"],
                "correctAnswer": 0
            },
            {
                "id": 2,
                "text": "در زمینه برنامه‌نویسی موبایل، مفهوم \"کراس پلتفرم\" (Cross-Platform) به چه معناست؟",
                "options": ["توسعه برنامه با یک کدبیس واحد که روی چندین سیستم‌عامل موبایل مانند اندروید و iOS اجرا می‌شود", "برنامه‌نویسی به زبان‌های مختلف برای هر پلتفرم به صورت مجزا", "ساخت وب‌سایت‌هایی که روی صفحه موبایل به خوبی نمایش داده می‌شوند", "طراحی برنامه‌هایی که فقط روی مدل‌های مختلف یک سازنده موبایل کار می‌کنند"],
                "correctAnswer": 0
            },
            {
                "id": 3,
                "text": "کدام سیستم‌عامل موبایل بر پایه هسته لینوکس توسعه یافته و توسط گوگل پشتیبانی می‌شود؟",
                "options": ["اندروید", "iOS", "سیمبیان", "ویندوز فون"],
                "correctAnswer": 0
            },
            {
                "id": 4,
                "text": "مزیت اصلی برنامه‌نویسی هیبریدی (Hybrid) در مقایسه با بومی (Native) چیست؟",
                "options": ["امکان توسعه سریع‌تر و با هزینه کمتر برای چندین پلتفرم با یک کدبیس واحد", "عملکرد بهینه و دسترسی کامل به سخت‌افزار دستگاه", "ارائه تجربه کاربری کاملاً یکپارچه با سیستم‌عامل", "نیاز نداشتن به اتصال اینترنت برای اجرای برنامه"],
                "correctAnswer": 0
            },
            {
                "id": 5,
                "text": "مفهوم \"API\" در توسعه برنامه موبایل به چه معناست؟",
                "options": ["مجموعه‌ای از قوانین، ابزارها و تعاریف برای ساخت نرم‌افزار که امکان تعامل بین برنامه‌ها را فراهم می‌کند", "یک زبان برنامه‌نویسی جدید برای توسعه برنامه‌های موبایل", "نام دیگر رابط کاربری گرافیکی (GUI) در برنامه‌های موبایل", "فرمت استاندارد برای ذخیره‌سازی داده‌ها در دستگاه‌های موبایل"],
                "correctAnswer": 0
            }
        ];

        // تابع برای تصادفی‌سازی آرایه (Fisher-Yates algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // تابع برای تولید ترتیب تصادفی گزینه‌ها و نگاشت پاسخ صحیح
        function prepareRandomizedQuestions(questions) {
            return questions.map(question => {
                // ایجاد کپی از گزینه‌ها
                const optionsCopy = [...question.options];
                
                // ذخیره پاسخ صحیح فعلی
                const correctAnswerText = optionsCopy[question.correctAnswer];
                
                // تصادفی‌سازی گزینه‌ها
                const shuffledOptions = shuffleArray([...optionsCopy]);
                
                // پیدا کردن ایندکس پاسخ صحیح در آرایه تصادفی‌شده
                const newCorrectAnswer = shuffledOptions.indexOf(correctAnswerText);
                
                return {
                    ...question,
                    options: shuffledOptions,
                    correctAnswer: newCorrectAnswer,
                    originalCorrectAnswer: question.correctAnswer // برای نمایش در بازخورد
                };
            });
        }

        // آماده‌سازی سوالات با ترتیب تصادفی گزینه‌ها
        let randomizedQuestions = prepareRandomizedQuestions(questions);
        
        // متغیرهای حالت
        let userAnswers = new Array(randomizedQuestions.length).fill(null);
        let quizSubmitted = false;
        
        // عناصر DOM
        const questionsContainer = document.getElementById('questions-container');
        const progressFill = document.getElementById('progress-fill');
        const answeredCount = document.getElementById('answered-count');
        const totalCount = document.getElementById('total-count');
        const resultsDiv = document.getElementById('results');
        const scoreElement = document.getElementById('score');
        const resetBtn = document.getElementById('reset-btn');
        
        // نمایش سوالات
        function renderQuestions() {
            questionsContainer.innerHTML = '';
            
            randomizedQuestions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question-card';
                
                const questionHeader = document.createElement('div');
                questionHeader.className = 'question-header';
                
                const questionNumber = document.createElement('div');
                questionNumber.className = 'question-number';
                questionNumber.textContent = `سوال ${question.id}`;
                
                const questionStatus = document.createElement('div');
                questionStatus.className = 'question-status';
                
                if (userAnswers[index] !== null) {
                    if (userAnswers[index] === question.correctAnswer) {
                        questionStatus.textContent = 'صحیح';
                        questionStatus.classList.add('correct');
                    } else {
                        questionStatus.textContent = 'نادرست';
                        questionStatus.classList.add('incorrect');
                    }
                } else {
                    questionStatus.textContent = 'پاسخ داده نشده';
                }
                
                questionHeader.appendChild(questionNumber);
                questionHeader.appendChild(questionStatus);
                questionElement.appendChild(questionHeader);
                
                const questionText = document.createElement('div');
                questionText.className = 'question-text';
                questionText.textContent = question.text;
                questionElement.appendChild(questionText);
                
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'options-container';
                
                question.options.forEach((option, optionIndex) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    
                    if (userAnswers[index] === optionIndex) {
                        optionElement.classList.add('selected');
                    }
                    
                    if (quizSubmitted) {
                        if (optionIndex === question.correctAnswer) {
                            optionElement.classList.add('correct');
                        } else if (optionIndex === userAnswers[index] && userAnswers[index] !== question.correctAnswer) {
                            optionElement.classList.add('incorrect');
                        }
                    }
                    
                    const optionLabel = document.createElement('span');
                    optionLabel.className = 'option-label';
                    optionLabel.textContent = String.fromCharCode(65 + optionIndex); // A, B, C, D
                    
                    const optionText = document.createElement('span');
                    optionText.className = 'option-text';
                    optionText.textContent = option;
                    
                    optionElement.appendChild(optionLabel);
                    optionElement.appendChild(optionText);
                    
                    if (!quizSubmitted) {
                        optionElement.addEventListener('click', () => {
                            selectOption(index, optionIndex);
                        });
                    }
                    
                    optionsContainer.appendChild(optionElement);
                });
                
                questionElement.appendChild(optionsContainer);
                
                // نمایش بازخورد اگر آزمون ارسال شده باشد
                if (quizSubmitted && userAnswers[index] !== null) {
                    const feedback = document.createElement('div');
                    const isCorrect = userAnswers[index] === question.correctAnswer;
                    feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
                    
                    if (isCorrect) {
                        feedback.innerHTML = `<span class="icon">✓</span> پاسخ شما صحیح است.`;
                    } else {
                        feedback.innerHTML = `
                            <span class="icon">✗</span> پاسخ شما نادرست است.
                            <div>پاسخ صحیح: ${question.options[question.correctAnswer]}</div>
                        `;
                    }
                    
                    questionElement.appendChild(feedback);
                }
                
                questionsContainer.appendChild(questionElement);
            });
            
            // به‌روزرسانی نوار پیشرفت
            updateProgressBar();
        }
        
        // انتخاب یک گزینه
        function selectOption(questionIndex, optionIndex) {
            if (quizSubmitted) return;
            
            userAnswers[questionIndex] = optionIndex;
            renderQuestions();
            
            // بررسی اینکه آیا همه سوالات پاسخ داده شده‌اند
            const allAnswered = userAnswers.every(answer => answer !== null);
            
            if (allAnswered) {
                // اگر همه سوالات پاسخ داده شده‌اند، نتایج را نشان دهید
                showResults();
            }
        }
        
        // به‌روزرسانی نوار پیشرفت
        function updateProgressBar() {
            const answered = userAnswers.filter(answer => answer !== null).length;
            const total = randomizedQuestions.length;
            const percentage = (answered / total) * 100;
            
            progressFill.style.width = `${percentage}%`;
            answeredCount.textContent = `${answered} پاسخ داده شده`;
            totalCount.textContent = `از ${total} سوال`;
        }
        
        // نمایش نتایج
        function showResults() {
            quizSubmitted = true;
            let score = 0;
            
            randomizedQuestions.forEach((question, index) => {
                if (userAnswers[index] === question.correctAnswer) {
                    score++;
                }
            });
            
            scoreElement.textContent = `امتیاز شما: ${score} از ${randomizedQuestions.length}`;
            resultsDiv.style.display = 'block';
            
            // اسکرول به بخش نتایج
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
            
            // رندر مجدد سوالات برای نمایش بازخورد
            renderQuestions();
        }
        
        // ریست آزمون
        function resetQuiz() {
            // تولید مجدد ترتیب تصادفی گزینه‌ها
            randomizedQuestions = prepareRandomizedQuestions(questions);
            userAnswers = new Array(randomizedQuestions.length).fill(null);
            quizSubmitted = false;
            resultsDiv.style.display = 'none';
            renderQuestions();
        }
        
        // مدیریت رویداد دکمه ریست
        resetBtn.addEventListener('click', resetQuiz);
        
        // مقداردهی اولیه
        totalCount.textContent = `از ${randomizedQuestions.length} سوال`;
        renderQuestions();
    </script>
</body>
</html>
